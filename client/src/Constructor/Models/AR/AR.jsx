import React from 'react'
import './AR.css';

import QRcode from '../../../images/QRcode.png';
import QRcodePreview from '../../../images/QRcodePreview.png';

import QRCode from 'react-qr-code';

//Конфиг
import { baseURL, backBaseURL } from '../../Config.js';

function AR ( props ) {

  const {
    closeModelAR,
    modelAR,
    linkToModel,
  } = props;

  const closeBtn = () =>{
    closeModelAR();
  }

  const redirectToLink = ( link ) => {

    const redirectLink = 'https://ardrimo.dev-2-tech.ru?f='+backBaseURL+linkToModel;
    window.open(redirectLink, '_blank');

  }

  return (

    <div className={ `Modal ${ modelAR ? 'show' : '' }` }>
      <div className="Modal-container">
        <div className="close" onClick={ () => closeBtn() }>
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <rect width="24" height="24" fill="white"/>
            <path d="M4 4L19.9997 19.9997" stroke="black" strokeWidth="2" strokeLinecap="square"/>
            <path d="M20 4L4.0003 19.9997" stroke="black" strokeWidth="2" strokeLinecap="square"/>
          </svg>
        </div>
        <div className="row justify-content-between">
          <div className="col-7">
            <div className="AR-title">AR решение</div>
            <div className="AR-des">Посмотрите получившийся результат в свое доме с помощью телефона</div>
            <div className="AR-sub"><span className="AR-dot"></span>Отсканируйте QR код камерой телефона</div>
            <div><div className="AR-QR">

              {
                linkToModel === 'error' ? (
                  <img src={ QRcode } />
                ) : ( 
                <div>
                  {
                    linkToModel ? (
                      <QRCode size={125} value={ 'https://ardrimo.dev-2-tech.ru?f='+backBaseURL+linkToModel } />
                    ) : (
                      <div style={ { height : '125px' } }>Подождите, мы генерируем QR-код</div>
                    )
                  }
                </div>
                )
              }
              
              
            </div>
              
            </div>
            <div className="AR-sub"><span className="AR-dot"></span>Или поделитесь:</div>   

            <div className="AR-ss">

              {
                linkToModel ? (
                  <div className="item" onClick={ () => redirectToLink( linkToModel ) }>
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <g clipPath="url(#clip0_3821_1188)">
                    <path d="M18.9823 6.29205C18.9401 5.33564 18.7855 4.67812 18.5639 4.10836C18.3353 3.50359 17.9837 2.96213 17.523 2.51201C17.0729 2.05489 16.5279 1.69969 15.9301 1.4747C15.357 1.25315 14.703 1.09848 13.7465 1.05632C12.783 1.01058 12.4771 1 10.0333 1C7.58942 1 7.28353 1.01058 6.32355 1.05274C5.36714 1.09491 4.70962 1.24971 4.14 1.47113C3.53508 1.69969 2.99363 2.05132 2.54351 2.51201C2.08639 2.96213 1.73132 3.50716 1.5062 4.10493C1.28464 4.67812 1.12998 5.33207 1.08781 6.28848C1.04207 7.25203 1.03149 7.55792 1.03149 10.0018C1.03149 12.4456 1.04207 12.7515 1.08424 13.7115C1.12641 14.6679 1.28121 15.3254 1.50276 15.8952C1.73132 16.4999 2.08639 17.0414 2.54351 17.4915C2.99363 17.9486 3.53866 18.3038 4.13643 18.5288C4.70962 18.7504 5.36357 18.905 6.32012 18.9472C7.27996 18.9895 7.58599 18.9999 10.0298 18.9999C12.4737 18.9999 12.7796 18.9895 13.7395 18.9472C14.696 18.905 15.3535 18.7504 15.9231 18.5288C17.1328 18.0611 18.0892 17.1047 18.5569 15.8952C18.7783 15.322 18.9331 14.6679 18.9753 13.7115C19.0175 12.7515 19.028 12.4456 19.028 10.0018C19.028 7.55792 19.0245 7.25203 18.9823 6.29205ZM17.3613 13.6411C17.3226 14.5202 17.175 14.9949 17.0519 15.3114C16.7494 16.0956 16.1271 16.7179 15.3429 17.0204C15.0264 17.1434 14.5483 17.2911 13.6727 17.3297C12.7232 17.372 12.4385 17.3824 10.0368 17.3824C7.63516 17.3824 7.34685 17.372 6.40088 17.3297C5.5218 17.2911 5.0471 17.1434 4.73063 17.0204C4.3404 16.8761 3.9852 16.6476 3.69689 16.3487C3.398 16.0568 3.16944 15.7052 3.02522 15.315C2.90215 14.9985 2.75449 14.5202 2.71589 13.6447C2.67359 12.6953 2.66315 12.4104 2.66315 10.0088C2.66315 7.60709 2.67359 7.31878 2.71589 6.37295C2.75449 5.49387 2.90215 5.01917 3.02522 4.7027C3.16944 4.31234 3.398 3.95727 3.70046 3.66883C3.99221 3.36994 4.34384 3.14138 4.7342 2.99729C5.05067 2.87422 5.52895 2.72656 6.40445 2.68783C7.35386 2.64566 7.63874 2.63508 10.0403 2.63508C12.4455 2.63508 12.7303 2.64566 13.6762 2.68783C14.5553 2.72656 15.03 2.87422 15.3465 2.99729C15.7367 3.14138 16.0919 3.36994 16.3802 3.66883C16.6791 3.96071 16.9077 4.31234 17.0519 4.7027C17.175 5.01917 17.3226 5.49731 17.3613 6.37295C17.4035 7.32236 17.4141 7.60709 17.4141 10.0088C17.4141 12.4104 17.4035 12.6917 17.3613 13.6411Z" fill="white"/>
                    <path d="M10.0334 5.37793C7.48061 5.37793 5.40942 7.44898 5.40942 10.0019C5.40942 12.5548 7.48061 14.6258 10.0334 14.6258C12.5863 14.6258 14.6573 12.5548 14.6573 10.0019C14.6573 7.44898 12.5863 5.37793 10.0334 5.37793ZM10.0334 13.0013C8.37727 13.0013 7.03393 11.6581 7.03393 10.0019C7.03393 8.34564 8.37727 7.00244 10.0334 7.00244C11.6896 7.00244 13.0328 8.34564 13.0328 10.0019C13.0328 11.6581 11.6896 13.0013 10.0334 13.0013Z" fill="white"/>
                    <path d="M15.9199 5.19496C15.9199 5.79109 15.4365 6.27445 14.8402 6.27445C14.2441 6.27445 13.7607 5.79109 13.7607 5.19496C13.7607 4.5987 14.2441 4.11548 14.8402 4.11548C15.4365 4.11548 15.9199 4.5987 15.9199 5.19496Z" fill="white"/>
                    </g>
                    <defs>
                    <clipPath id="clip0_3821_1188">
                    <rect width="18" height="18" fill="white" transform="translate(1 1)"/>
                    </clipPath>
                    </defs>
                    </svg>
                  </div>
                ) : ''

              }
              {
                linkToModel ? (
                  <div className="item" onClick={ () => redirectToLink( linkToModel ) }>
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M15.9368 10.7343C15.6458 10.3843 15.729 10.2286 15.9368 9.91571C15.9405 9.91214 18.3428 6.75071 18.5904 5.67857L18.5919 5.67786C18.7149 5.28714 18.5919 5 17.9971 5H16.029C15.528 5 15.297 5.24643 15.1732 5.52214C15.1732 5.52214 14.1712 7.80643 12.7537 9.28714C12.2961 9.715 12.0846 9.85214 11.8349 9.85214C11.7119 9.85214 11.5206 9.715 11.5206 9.32429V5.67786C11.5206 5.20929 11.3804 5 10.9656 5H7.87099C7.55673 5 7.36997 5.21857 7.36997 5.42214C7.36997 5.86643 8.07875 5.96857 8.15225 7.21857V9.93071C8.15225 10.525 8.03899 10.6343 7.78774 10.6343C7.11871 10.6343 5.49491 8.34071 4.53262 5.71571C4.33837 5.20643 4.14861 5.00071 3.64384 5.00071H1.67502C1.11325 5.00071 1 5.24714 1 5.52286C1 6.01 1.66902 8.43214 4.11111 11.6321C5.73866 13.8164 8.03074 15 10.1158 15C11.3691 15 11.5221 14.7371 11.5221 14.285C11.5221 12.1979 11.4089 12.0007 12.0366 12.0007C12.3276 12.0007 12.8287 12.1379 13.9987 13.1914C15.336 14.4407 15.5558 15 16.3043 15H18.2723C18.8334 15 19.1176 14.7371 18.9541 14.2186C18.5799 13.1279 16.0508 10.8843 15.9368 10.7343Z" fill="white"/>
                    </svg>
                  </div>
                ) : ''

              }
              {
                linkToModel ? (
                  <div className="item" onClick={ () => redirectToLink( linkToModel ) }>
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <g clipPath="url(#clip0_3821_1197)">
                      <path d="M14.5817 11.985C14.3308 11.86 13.1092 11.2625 12.8817 11.18C12.6542 11.0958 12.4875 11.055 12.3208 11.305C12.1567 11.5508 11.6783 12.1083 11.5342 12.2733C11.3883 12.4358 11.2433 12.4483 10.9958 12.3358C10.7458 12.2108 9.94333 11.9483 8.99333 11.0983C8.25333 10.4358 7.75667 9.62333 7.61 9.37333C7.465 9.12333 7.59417 8.98583 7.71833 8.86083C7.83167 8.74833 7.96917 8.57333 8.09417 8.425C8.21583 8.27417 8.25583 8.17417 8.34167 8.01167C8.425 7.83667 8.3825 7.69917 8.32083 7.575C8.25833 7.45 7.76083 6.225 7.5525 5.73667C7.3525 5.25 7.14667 5.31167 6.9925 5.31167C6.84917 5.29917 6.68333 5.29917 6.51667 5.29917C6.35 5.29917 6.08083 5.36083 5.8525 5.59833C5.625 5.84833 4.98167 6.44833 4.98167 7.66083C4.98167 8.87333 5.87333 10.0483 5.9975 10.2233C6.12167 10.3858 7.75167 12.8858 10.2475 13.9608C10.8425 14.2108 11.3058 14.3608 11.6675 14.485C12.2625 14.6742 12.805 14.6475 13.2342 14.5858C13.7125 14.51 14.7067 13.985 14.9142 13.3975C15.1267 12.81 15.1267 12.3225 15.0642 12.21C15.0025 12.0975 14.8392 12.035 14.5892 11.9225L14.5817 11.985ZM10.0508 18.125H10.0375C8.5625 18.125 7.10083 17.725 5.825 16.975L5.525 16.7967L2.4 17.6092L3.2375 14.5717L3.03833 14.2592C2.21333 12.9458 1.775 11.4333 1.775 9.87583C1.775 5.33833 5.4875 1.63833 10.06 1.63833C12.2717 1.63833 14.3475 2.50083 15.9108 4.06333C17.4733 5.6125 18.335 7.68833 18.335 9.88833C18.3317 14.425 14.6183 18.1258 10.0558 18.1258L10.0508 18.125ZM17.1 2.87417C15.2 1.0375 12.7 0 10.0375 0C4.5525 0 0.0866667 4.445 0.0841667 9.91083C0.0841667 11.6575 0.541667 13.3608 1.41333 14.865L0 20L5.27917 18.6233C6.73417 19.4092 8.37083 19.8267 10.0375 19.8292H10.0425C15.53 19.8292 19.9975 15.3825 20 9.91583C20 7.26917 18.9667 4.77833 17.0875 2.90667" fill="white"/>
                      </g>
                      <defs>
                      <clipPath id="clip0_3821_1197">
                      <rect width="20" height="20" fill="white"/>
                      </clipPath>
                      </defs>
                    </svg>
                  </div>
                ) : ''

              }

              {
                linkToModel ? (
                  <div className="item" onClick={ () => redirectToLink( linkToModel ) }>
                
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <g clipPath="url(#clip0_3821_1200)">
                      <path d="M0.353259 9.61929L4.96167 11.4537L6.7454 17.5717C6.85954 17.9635 7.3088 18.1083 7.607 17.8483L10.1758 15.6149C10.4451 15.3809 10.8286 15.3692 11.11 15.5871L15.7432 19.1746C16.0622 19.4219 16.5141 19.2355 16.5941 18.8244L19.9882 1.41252C20.0756 0.963453 19.6618 0.588825 19.2609 0.754205L0.347859 8.5355C-0.118874 8.72747 -0.114808 9.43222 0.353259 9.61929ZM6.45793 10.4772L15.4645 4.56113C15.6263 4.45512 15.7929 4.68855 15.6539 4.82605L8.22087 12.1949C7.9596 12.4543 7.79107 12.8014 7.74334 13.1781L7.49014 15.1793C7.4566 15.4465 7.10467 15.4731 7.03554 15.2145L6.06173 11.5652C5.9502 11.149 6.11273 10.7044 6.45793 10.4772Z" fill="white"/>
                      </g>
                      <defs>
                      <clipPath id="clip0_3821_1200">
                      <rect width="20" height="20" fill="white"/>
                      </clipPath>
                      </defs>
                    </svg>

                  </div>
                ) : ''

              }

              {
                linkToModel ? (
                  <div className="item" onClick={ () => redirectToLink( linkToModel ) }>
                
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <g clipPath="url(#clip0_3821_1203)">
                      <g clipPath="url(#clip1_3821_1203)">
                      <rect x="2" y="6" width="12" height="12" stroke="white" strokeWidth="2"/>
                      <path d="M7 2H19V11.5" stroke="white" strokeWidth="2"/>
                      </g>
                      </g>
                      <defs>
                      <clipPath id="clip0_3821_1203">
                      <rect width="20" height="20" fill="white"/>
                      </clipPath>
                      <clipPath id="clip1_3821_1203">
                      <rect width="20" height="20" fill="white"/>
                      </clipPath>
                      </defs>
                    </svg>

                  </div>
                ) : ''

              }

              {
                linkToModel ? '' : 'Загрузка'
              }

            </div>
          </div>
          <div className="col-5">
            <div className="AR-preview">
              <img src={QRcodePreview} />
            </div>
          </div>
        </div>
             
      </div>
    </div>
    
  );
}

export default AR;